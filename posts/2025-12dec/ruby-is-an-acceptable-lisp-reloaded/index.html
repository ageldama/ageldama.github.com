<!DOCTYPE html>
<html><head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Ruby is an acceptable LISP (Reloaded!) - 아겔로그</title><meta name="hugo-gen-timestamp" content="1771404626">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="view-transition" content="same-origin">
    <meta name="description" content="
HN: Why Ruby is an acceptable Lisp (2005) (randomhacks.net)

commonlisp sly/slime 세션의 interactive development처럼 흉내내기.
(제목의 “reloaded”-은 말장난)


commonlisp sly/slime?


커먼리습을 위한 emacs mode. 흥미로운 점은 실행중인 리습코드가 이미
  루프를 돌아가고 있더라도, 다른 스레드의 swank1에서 코드를
  변경&#43;컴파일해서 로딩하면, 실행중인 루프에 바로 반영된다.

  이게 뭐가 편한가 싶은데, 만약 다른 언어였다면:

코드를 수정.
(OPTIONAL) 동작하고 있던 프로그램을 종료
(OPTIONAL) 새 코드를 컴파일하거나,
어쨌든 다시 처음부터 프로그램을 시작.
… #1부터 반복.


  물론, “watcher”-같은걸 붙여놓고 자동으로 파일이 변경되면 tests을
  다시 실행하거나, 프로그램을 재시작하도록 하는게
  ‘development’-mode에선 일반적이다.2" />
    <meta property="og:image" content=""/>
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/styles.cf6e224503e8604b8cfea063150685f5d1e1e66e9d4705693ef0163e1c529e7d.css"
          integrity="sha256-z24iRQPoYEuM/qBjFQaF9dHh5m6dRwVpPvAWPhxSnn0=" crossorigin="anonymous">
    
    
    
    
    

        
        
        
            
                
                    <script src="/js/bundle.c11f553788e500f0664c8f4de6cd61b730fc0e27c6d1809bc240d1cd7abfdcde.js" integrity="sha256-wR9VN4jlAPBmTI9N5s1htzD8DifG0YCbwkDRzXq/3N4=" crossorigin="anonymous"></script>
                
            
        
    

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&family=Noto+Sans+KR:wght@100..900&family=Noto+Serif+KR:wght@200..900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&family=Nanum+Gothic+Coding&family=Noto+Sans+KR:wght@100..900&family=Noto+Serif+KR:wght@200..900&display=swap" rel="stylesheet">
</head>
<body hx-boost="true" hx-indicator=".htmx-indicator">
        <div class="htmx-indicator"><div class="spinner"></div></div>

        <div class="container"><header>
    <div class="main ">
        <h1 class="site-title ">
            <a href="https://ageldama.github.io/">아겔로그</a>
        </h1>
    </div>

    <nav>
        
          <div class="search-form">
      <span class="search-loading-indicator" style="display: none;"></span>
      <input id="search-query" name="search-query"
          type="text"
          class="search-query"
          tabindex="1"
          placeholder="🔎 검색 (search)"
          onkeyup="searcher.onSearchKeyup(event)"/>
  </div>

        

        
        <a href="/series/">📚 Series</a>
        
        <a href="/archive/">🗂️ Archive</a>
        
        <a href="/myself/">📨 Contact</a>
        

        
        <button class="dark-mode-btn"
        aria-label="toggle dark-mode"
        onclick="colorscheme.toggle()">color: </button>
<!--button class="snow-mode-btn"
        aria-label="toggle dark-mode"
        onclick="letitsnow(event)">☃️ snow?</button-->

        
    </nav>
</header>





<script>
 
 if (window.navigator.userAgent.indexOf('Trident/') > 0) {
     let urls = [];
     let head = document.getElementsByTagName("head")[0];
     urls.forEach(function(url) {
         let script = document.createElement("script");
         script.src = url;
         head.appendChild(script);
     });
 }
 
</script>

<div class="search">
    <div class="search-results"></div>
</div>


<main>
    <nav class="post-prevnext" aria-label="posts">
    <span class="post-prevnext-side">
        
        <a class="post-prevnext-btn" href="https://ageldama.github.io/posts/2025-12dec/2025-12dec27--01-ping/">⬅️ Rob “Commander” Pike의 AI극딜</a>
        
    </span>

    <span class="post-prevnext-side">
        
        <a class="post-prevnext-btn" href="https://ageldama.github.io/posts/2025-12dec/haruki-manga-stories--super-frog/">➡️ 무라카미 하루키 “Manga Stories 1” 그래픽노블</a>
        
    </span>
</nav>

    
    <hr class="archive-ruler">
    
    <nav id="TableOfContents">
<ul>
<li><a href="#headline-1">commonlisp sly/slime?</a>
</li>
<li><a href="#headline-2">rails은 그냥 되던데요</a>
</li>
<li><a href="#headline-3">commonlisp, smalltalk의 또다른 (숨은) 편리함</a>
</li>
<li><a href="#headline-4">zeitwerk?</a>
<ul>
<li><a href="#headline-5">1단계: <code>require</code> 제거</a>
</li>
<li><a href="#headline-6">2단계: code reloading</a>
</li>
<li><a href="#headline-7">한계점</a>
</li>
</ul>
</li>
<li><a href="#headline-8">Ruby에서 zeitwerk이 유용했던 이유?</a>
</li>
<li><a href="#headline-9">Footnotes</a>
</li>
</ul>
</nav>

    <article>
	<div class="title"><h1 class="title">🔋 Ruby is an acceptable LISP (Reloaded!)</h1>
	    <div class="meta">
                <time datetime="2025-12-26" pubdate>
                    2025년12월26일
                </time>
                </div>
        </div>

        

	

	<section class="body">
	    
<p>
<a href="https://news.ycombinator.com/item?id=12470715">HN: Why Ruby is an acceptable Lisp (2005) (randomhacks.net)</a></p>
<p>
commonlisp sly/slime 세션의 interactive development처럼 흉내내기.
(제목의 “reloaded”-은 말장난)</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
commonlisp sly/slime?
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>커먼리습을 위한 emacs mode. 흥미로운 점은 실행중인 리습코드가 이미
  루프를 돌아가고 있더라도, 다른 스레드의 swank<sup class="footnote-reference"><a id="footnote-reference-1" href="#footnote-1">1</a></sup>에서 코드를
  변경+컴파일해서 로딩하면, 실행중인 루프에 바로 반영된다.</p>
<p>
  이게 뭐가 편한가 싶은데, 만약 다른 언어였다면:</p>
<ol>
<li>코드를 수정.</li>
<li>(OPTIONAL) 동작하고 있던 프로그램을 종료</li>
<li>(OPTIONAL) 새 코드를 컴파일하거나,</li>
<li>어쨌든 다시 처음부터 프로그램을 시작.</li>
<li>… #1부터 반복.</li>
</ol>
<p>
  물론, “watcher”-같은걸 붙여놓고 자동으로 파일이 변경되면 tests을
  다시 실행하거나, 프로그램을 재시작하도록 하는게
  ‘development’-mode에선 일반적이다.<sup class="footnote-reference"><a id="footnote-reference-2" href="#footnote-2">2</a></sup></p>
<p>
  물론 꼭 커먼리습/스몰톡 같이 변경이 실행중인 코드에 바로
  반영되어야만 하는 경우는 많지 않을수도 있다.</p>
<p>
  반면에, 그렇게 코딩단계를 쓰지 못하기 때문에, 현재의 tests을 변경에
  따라 실행해 나가는 방식으로 자리를 잡게 되었는지도 모르겠다.</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
rails은 그냥 되던데요
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>실은 rails 개발을 하면, 코드를 수정하고 즉시 웹브라우저에서 변경된
  내용을 F5 / reload만 눌러서 확인이 가능하다.</p>
<p>
  rails server을 다시 시작할 필요도 없고, 마치 php와 같이 변경이 바로
  반영되어 확인할 수 있음.</p>
<p>
  그런데 생각해보면, php은 실행모델이 원래 그러니까 자연스럽게 변경된
  내용이 다음번 HTTP request에 바로 반영된걸로 보이는게 당연하다.
  php은 한 http request이 실은 php 파일을 로딩하고 처음부터 다시
  실행되는게 기본전제이고, 현대의 php-fpm이나 frankenphp등의 다른
  방식을 사용하더라도, 최소한 development-mode에선 이런 php의 특성을
  그대로 유지하려고 애쓰는 모습이다. (개발단계가 엄청나게 편해지니까)</p>
<p>
  그런데, rails은 별도의 루비코드가 하나의 요청-응답을 처리하는
  서버프로세스로 이미 동작하고 있는데 어떻게 자동적으로 변경을
  반영해줄 수 있을까?</p>
<p>
  ==&gt; 답은, rails이 <a href="https://github.com/fxn/zeitwerk">zeitwerk</a> rubygem을 사용하고 있기 때문. <sup class="footnote-reference"><a id="footnote-reference-3" href="#footnote-3">3</a></sup></p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
commonlisp, smalltalk의 또다른 (숨은) 편리함
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>바로 <code>import</code> / <code>require</code> 같은걸 쓸일이 없다는점.</p>
<p>
  커먼리습과 스몰톡 모두 현재 VM이 로딩한 코드는 패키지나
  카테고리 같은 namespaces으로 구분되기는 하지만 직접 이들을 로딩할
  필요가 거의 없도록 한다.</p>
<p>
  물론, 처음 코드를 파일시스템이나 Git에서 로딩하기 위해서 <a href="https://asdf.common-lisp.dev/">asdf</a>이나
  <a href="https://github.com/pharo-vcs/iceberg/wiki/Tutorial">Iceberg</a>등을 사용하기는 하지만, 처음에 한 번이다. 커먼리습은
  코드파일을 변경하고 그걸 바로 컴파일+로드 해나가면서 작업하고,
  스몰톡은 이미지에 계속 작업을 쌓아가다가 나중에 Git commit하거나
  Export하므로.</p>
<p>
  반면 Java 같은 나름대로 import하기 균일한 언어만 해도
  IntelliJ/Eclipse JDT/LSP 같은 도구가 없다면 import을 하나씩 찾아주기
  괴로워진다.</p>
<p>
  node.js에서 require/import은… 더 끔찍하다. commonjs module, esm
  구분도 골치아파지고 쓸때마다 괴롭다.</p>
<p>
  루비에서도 require은 있지만, 가장 단순한 형태에 속하는거 같다. 그냥
  지정한 이름을 <code>$LOAD_PATH</code>-에서 찾아서 로딩하는것.</p>
<p>
  Perl 5의 use 같은 신비롭고도 복잡한 방식은 아니라 다행이다.<sup class="footnote-reference"><a id="footnote-reference-4" href="#footnote-4">4</a></sup></p>
<p>
  그런데, rails을 쓰다보면, controller/service등의 코드에서 다른
  클래스를 불러오기 위해 <code>require</code>-을 쓸일이 전혀 없다.</p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
zeitwerk?
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>위에 언급한 커먼리습과 스몰톡의 장점을 루비/레일즈에서 zeitwerk을
  통해 얻을 수 있다<sup class="footnote-reference"><a id="footnote-reference-5" href="#footnote-5">5</a></sup>:</p>
<ol>
<li><code>require</code>-없이 바로 클래스나 모듈에 접근이 가능하다.</li>
<li>소스코드 파일이 변경되면 자동으로 해당 코드만 reload하여 반영할
수 있다.</li>
</ol>
<p>
  실은 rails 프로젝트를 개발하면, zeitwerk이 이미 세팅되어 있어서
  신경쓸게 없다.</p>
<p>
  여기에선 ruby가 이런 측면에서도 an acceptable lisp (reloaded!)임을
  보이기 위해서 하나씩 시도해보려고 함. (그리고 재밌으니까)</p>
<div id="outline-container-headline-5" class="outline-3">
<h3 id="headline-5">
1단계: <code>require</code> 제거
</h3>
<div id="outline-text-headline-5" class="outline-text-3">
<p>
   내가 짠 클래스(<code>MyLib::Greeter</code>) 불러와 사용하는 스크립트.</p>
<p>
   <code>main.rb</code> :</p>
<div class="src src-ruby">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a class="lnlinks" href="#1"> 1</a>
</span><span class="lnt" id="2"><a class="lnlinks" href="#2"> 2</a>
</span><span class="lnt" id="3"><a class="lnlinks" href="#3"> 3</a>
</span><span class="lnt" id="4"><a class="lnlinks" href="#4"> 4</a>
</span><span class="lnt" id="5"><a class="lnlinks" href="#5"> 5</a>
</span><span class="lnt" id="6"><a class="lnlinks" href="#6"> 6</a>
</span><span class="lnt" id="7"><a class="lnlinks" href="#7"> 7</a>
</span><span class="lnt" id="8"><a class="lnlinks" href="#8"> 8</a>
</span><span class="lnt" id="9"><a class="lnlinks" href="#9"> 9</a>
</span><span class="lnt" id="10"><a class="lnlinks" href="#10">10</a>
</span><span class="lnt" id="11"><a class="lnlinks" href="#11">11</a>
</span><span class="lnt" id="12"><a class="lnlinks" href="#12">12</a>
</span><span class="lnt" id="13"><a class="lnlinks" href="#13">13</a>
</span><span class="lnt" id="14"><a class="lnlinks" href="#14">14</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl">  <span class="c1">#!/usr/bin/env ruby</span>
</span></span><span class="line"><span class="cl">  <span class="nb">require</span> <span class="s1">&#39;bundler/inline&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">gemfile</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="n">source</span> <span class="s1">&#39;https://rubygems.org&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gem</span> <span class="s1">&#39;zeitwerk&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">loader</span> <span class="o">=</span> <span class="no">Zeitwerk</span><span class="o">::</span><span class="no">Loader</span><span class="o">.</span><span class="n">new</span>
</span></span><span class="line"><span class="cl">  <span class="n">loader</span><span class="o">.</span><span class="n">push_dir</span><span class="p">(</span><span class="no">Pathname</span><span class="p">(</span><span class="n">__dir__</span><span class="p">)</span> <span class="o">/</span> <span class="s1">&#39;lib&#39;</span><span class="p">)</span> <span class="c1"># &lt;-- 요기에서 찾아서 로딩.</span>
</span></span><span class="line"><span class="cl">  <span class="n">loader</span><span class="o">.</span><span class="n">setup</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">#    vvvvv `require` 없이 바로 사용!</span>
</span></span><span class="line"><span class="cl">  <span class="nb">puts</span> <span class="no">MyLib</span><span class="o">::</span><span class="no">Greeter</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">greet</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>
   <code>lib/my_lib/greeter.rb</code> :</p>
<div class="src src-ruby">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a class="lnlinks" href="#1">1</a>
</span><span class="lnt" id="2"><a class="lnlinks" href="#2">2</a>
</span><span class="lnt" id="3"><a class="lnlinks" href="#3">3</a>
</span><span class="lnt" id="4"><a class="lnlinks" href="#4">4</a>
</span><span class="lnt" id="5"><a class="lnlinks" href="#5">5</a>
</span><span class="lnt" id="6"><a class="lnlinks" href="#6">6</a>
</span><span class="lnt" id="7"><a class="lnlinks" href="#7">7</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl">  <span class="k">module</span> <span class="nn">MyLib</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Greeter</span>
</span></span><span class="line"><span class="cl">      <span class="k">def</span> <span class="nf">greet</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Hello, World!&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="k">end</span>
</span></span><span class="line"><span class="cl">    <span class="k">end</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>
   여기서 사용한 내용들은:</p>
<ul>
<li>bundler/inline :
<a href="https://bundler.io/guides/bundler_in_a_single_file_ruby_script.html">https://bundler.io/guides/bundler_in_a_single_file_ruby_script.html</a></li>
<li>zeitwerk : <a href="https://github.com/fxn/zeitwerk?tab=readme-ov-file#synopsis">https://github.com/fxn/zeitwerk?tab=readme-ov-file#synopsis</a></li>
</ul>
</div>
</div>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
2단계: code reloading
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>
   <code>main.rb</code> (개선) :</p>
<div class="src src-ruby">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a class="lnlinks" href="#1"> 1</a>
</span><span class="lnt" id="2"><a class="lnlinks" href="#2"> 2</a>
</span><span class="lnt" id="3"><a class="lnlinks" href="#3"> 3</a>
</span><span class="lnt" id="4"><a class="lnlinks" href="#4"> 4</a>
</span><span class="lnt" id="5"><a class="lnlinks" href="#5"> 5</a>
</span><span class="lnt" id="6"><a class="lnlinks" href="#6"> 6</a>
</span><span class="lnt" id="7"><a class="lnlinks" href="#7"> 7</a>
</span><span class="lnt" id="8"><a class="lnlinks" href="#8"> 8</a>
</span><span class="lnt" id="9"><a class="lnlinks" href="#9"> 9</a>
</span><span class="lnt" id="10"><a class="lnlinks" href="#10">10</a>
</span><span class="lnt" id="11"><a class="lnlinks" href="#11">11</a>
</span><span class="lnt" id="12"><a class="lnlinks" href="#12">12</a>
</span><span class="lnt" id="13"><a class="lnlinks" href="#13">13</a>
</span><span class="lnt" id="14"><a class="lnlinks" href="#14">14</a>
</span><span class="lnt" id="15"><a class="lnlinks" href="#15">15</a>
</span><span class="lnt" id="16"><a class="lnlinks" href="#16">16</a>
</span><span class="lnt" id="17"><a class="lnlinks" href="#17">17</a>
</span><span class="lnt" id="18"><a class="lnlinks" href="#18">18</a>
</span><span class="lnt" id="19"><a class="lnlinks" href="#19">19</a>
</span><span class="lnt" id="20"><a class="lnlinks" href="#20">20</a>
</span><span class="lnt" id="21"><a class="lnlinks" href="#21">21</a>
</span><span class="lnt" id="22"><a class="lnlinks" href="#22">22</a>
</span><span class="lnt" id="23"><a class="lnlinks" href="#23">23</a>
</span><span class="lnt" id="24"><a class="lnlinks" href="#24">24</a>
</span><span class="lnt" id="25"><a class="lnlinks" href="#25">25</a>
</span><span class="lnt" id="26"><a class="lnlinks" href="#26">26</a>
</span><span class="lnt" id="27"><a class="lnlinks" href="#27">27</a>
</span><span class="lnt" id="28"><a class="lnlinks" href="#28">28</a>
</span><span class="lnt" id="29"><a class="lnlinks" href="#29">29</a>
</span><span class="lnt" id="30"><a class="lnlinks" href="#30">30</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl">  <span class="c1">#!/usr/bin/env ruby</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">require</span> <span class="s1">&#39;bundler/inline&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">gemfile</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="n">source</span> <span class="s1">&#39;https://rubygems.org&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gem</span> <span class="s1">&#39;zeitwerk&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gem</span> <span class="s1">&#39;filewatcher&#39;</span>  <span class="c1"># &lt;-- 추가</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">loader</span> <span class="o">=</span> <span class="no">Zeitwerk</span><span class="o">::</span><span class="no">Loader</span><span class="o">.</span><span class="n">new</span> <span class="c1"># for_gem(warn_on_extra_files: false)</span>
</span></span><span class="line"><span class="cl">  <span class="n">loader</span><span class="o">.</span><span class="n">push_dir</span><span class="p">(</span><span class="no">Pathname</span><span class="p">(</span><span class="n">__dir__</span><span class="p">)</span> <span class="o">/</span> <span class="s1">&#39;lib&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">loader</span><span class="o">.</span><span class="n">enable_reloading</span>  <span class="c1"># &lt;-- 추가</span>
</span></span><span class="line"><span class="cl">  <span class="n">loader</span><span class="o">.</span><span class="n">setup</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1"># 별도 스레드에서 파일변경모니터링 =&gt; zeitwerk-reload</span>
</span></span><span class="line"><span class="cl">  <span class="n">fsw</span> <span class="o">=</span> <span class="no">Filewatcher</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span><span class="s1">&#39;lib/&#39;</span><span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="no">Thread</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">fsw</span><span class="p">)</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="n">fsw</span><span class="o">.</span><span class="n">watch</span> <span class="k">do</span> <span class="o">|</span><span class="n">_filename</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">      <span class="n">loader</span><span class="o">.</span><span class="n">reload</span>
</span></span><span class="line"><span class="cl">    <span class="k">end</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1"># 예시를 보이기 위해 계속 실행되어야 하므로.</span>
</span></span><span class="line"><span class="cl">  <span class="kp">loop</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...새로운 인스턴스에 변경이 적용되므로,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...매번 new하도록.</span>
</span></span><span class="line"><span class="cl">    <span class="nb">puts</span> <span class="no">MyLib</span><span class="o">::</span><span class="no">Greeter</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">greet</span>
</span></span><span class="line"><span class="cl">    <span class="nb">sleep</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>
   …이제 이 스크립트를 실행시키고, <code>lib/my_lib/greeter.rb</code>-을
   수정하여 메시지를 바꾸고 저장해보면, 실행중이던 스크립트의 출력이
   즉시변경된다. 🎊</p>
</div>
</div>
<div id="outline-container-headline-7" class="outline-3">
<h3 id="headline-7">
한계점
</h3>
<div id="outline-text-headline-7" class="outline-text-3">
<p>위 예제에서 보듯이, 이미 존재하는 인스턴스를 바꿔치거나 하는건
   동작하지 않을것 같다.</p>
<p>
   하지만, 인스턴스를 바꿔쳐줘도 좀 혼란스러울거 같은데, 어떤 기준으로
   어떻게 전환될지 이해하기 어려울거 같기 때문. 저정도만 해도 합리적인
   수준인거 같다.<sup class="footnote-reference"><a id="footnote-reference-6" href="#footnote-6">6</a></sup></p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-8" class="outline-2">
<h2 id="headline-8">
Ruby에서 zeitwerk이 유용했던 이유?
</h2>
<div id="outline-text-headline-8" class="outline-text-2">
<p>앞서 언급한 루비 이외에 최근에 흔한 Node.js, Python 등의 다른
  언어들이었다면, zeitwerk 같은 라이브러리가 있었다고 하더라도,
  유용성이 적었거나, 그냥 현재의 아예 프로그램을 처음부터 재시작하는
  방식이 더 나았으리라 싶다.</p>
<p>
  그렇게 생각하는 이유는 루비의 설계가 Smalltalk + Lisp + … 이기
  때문인거 같다.</p>
<p>
  루비의 메서드호출은 스몰톡의 그것과 같이 message-passing으로
  이루어지고, 이는 실행시간에 성능이 느리지만, 진짜 dynamic-dispatch이
  가능하도록 해준다. 그리고 루비의 큰 장점인 metaprogramming도 이런
  특성에 큰 덕을 보고 있다.<sup class="footnote-reference"><a id="footnote-reference-7" href="#footnote-7">7</a></sup></p>
<p>
  리습의 경우에도 유사하게, 함수의 심볼을 갖고 있고, 그 심볼에 연결된
  함수를 호출하는, 결과적으로 message-passing와 거의 같은 효과를
  갖는다.</p>
<p>
  호출하는 쪽에서 코드가 변경되지 않더라도(reload하지 않더라도),
  피호출 클래스나 코드가 변경된 것을 실행시간에 그대로 반영 받을 수
  있는 구조이기 때문이다.</p>
<p>
  실은, 자바스크립트나 파이썬도 실행시간에 메서드를 찾아내는 방식은
  충분히 동적이다. ㅎㅎ그리고 루비 + zeitwerk도 완전히 모든 경우에
  프로그램을 완전히 재시작할 필요를 없애주지는 못한다. 하지만, 이 글은
  루비에 우호적인 글이므로 이렇게 써봤다.</p>
<p>
  글쎄다. 다른 언어에서보다 이렇게 생태계나 툴링이 마치 리습이나
  스몰톡을 복원한것처럼 되어온데엔, 기술적인 특징 이외에도, 원래
  루비가 그런 조상들에 대해 호감을 갖고 있었기 때문이지 않을까.</p>
</div>
</div>
<div id="outline-container-headline-9" class="outline-2">
<h2 id="headline-9">
Footnotes
</h2>
</div>
<div class="footnotes">
<hr class="footnotes-separatator"/>
<div class="footnote-definitions">
<div class="footnote-definition">
<sup id="footnote-1"><a href="#footnote-reference-1">1</a></sup>
<div class="footnote-body">
<p><a href="https://github.com/joaotavora/sly/discussions/529">GitHub: Understanding the Slynk protocol? #529</a></p>
</div>
</div>
<div class="footnote-definition">
<sup id="footnote-2"><a href="#footnote-reference-2">2</a></sup>
<div class="footnote-body">
<p>npm에서만 찾아봐도, nodemon, chokidar, node-watch등 딱 이렇게
쓰기 위한 도구들이 있다.</p>
</div>
</div>
<div class="footnote-definition">
<sup id="footnote-3"><a href="#footnote-reference-3">3</a></sup>
<div class="footnote-body">
<p>물론, rails에선 zeitwerk을 그냥 그대로 사용하는것만이 아니라,
파일변경을 모니터링하고 reload을 요청하고 하는 모든 처리를 해준다.</p>
</div>
</div>
<div class="footnote-definition">
<sup id="footnote-4"><a href="#footnote-reference-4">4</a></sup>
<div class="footnote-body">
<p><a href="https://perldoc.perl.org/functions/use">https://perldoc.perl.org/functions/use</a> … <code>@INC</code>-로딩경로를
탐색도 하고, 거기에 나아가서 해당 ‘모듈’의 코드를 실행해서 importing도
처리해주고… 그리고 모듈만이 아니라 “pragmas”에 속하는 경고수준을
바꾸거나 하는 것도 모두 이렇게 구현되어 있어서 복잡하다. 그리고 이런
“훌륭함”이 JavaScript에도 전해져서 <code>&#34;use strict&#34;</code>-같은 갑자기 분위기
Perl인 문장들이 자바스크립트에 안어울리게 종종 튀어나오는 원인이
되기도 한다.</p>
</div>
</div>
<div class="footnote-definition">
<sup id="footnote-5"><a href="#footnote-reference-5">5</a></sup>
<div class="footnote-body">
<p>“zeitwerk”은 직역하면 “time-work”(獨🇩🇪).</p>
</div>
</div>
<div class="footnote-definition">
<sup id="footnote-6"><a href="#footnote-reference-6">6</a></sup>
<div class="footnote-body">
<p>커먼리습의 CLOS은 이미 존재하는 인스턴스의 클래스를 바꾸는게
가능하긴 하지만:
<a href="https://funcall.blogspot.com/2025/03/advanced-clos-update-instance-for.html">https://funcall.blogspot.com/2025/03/advanced-clos-update-instance-for.html</a>
…괜찮다. ㅎㅎ</p>
</div>
</div>
<div class="footnote-definition">
<sup id="footnote-7"><a href="#footnote-reference-7">7</a></sup>
<div class="footnote-body">
<p>과거의 Objective-C와 OSX의 NeXTSTEP API들도 모두 이런 스몰톡의
특징을 그대로 구현해놓았다. (API와 ObjC Runtime을 통해서)</p>
</div>
</div>
</div>
</div>

	</section><div class="post-tags">
	    
	    
	    <nav class="nav tags">
		<ul class="tags">
		    
		    <li class="tagbutton-inline">👅<a href="/series/programming-languages/">programming-languages</a>
                        <sup>27</sup>
                    </li>
		    
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/lisp/">lisp</a>
                        <sup>26</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/commonlisp/">commonlisp</a>
                        <sup>20</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/common-lisp/">common-lisp</a>
                        <sup>19</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/smalltalk/">smalltalk</a>
                        <sup>5</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/ruby/">ruby</a>
                        <sup>5</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/filewatcher/">filewatcher</a>
                        <sup>1</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/rails/">rails</a>
                        <sup>1</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/rubygems/">rubygems</a>
                        <sup>1</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/bundler/">bundler</a>
                        <sup>1</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/zeitwerk/">zeitwerk</a>
                        <sup>1</sup>
                    </li>
		    
		    <li class="tagbutton-inline">
                        🏷️ <a href="/tags/reloading/">reloading</a>
                        <sup>1</sup>
                    </li>
		    
		</ul>
	    </nav>
	    
	    
	</div>
    </article>

    <hr class="archive-ruler">

    <style>
     :root {--bg-big-emoji: "🔋";}
    </style>

    <nav class="post-prevnext" aria-label="posts">
    <span class="post-prevnext-side">
        
        <a class="post-prevnext-btn" href="https://ageldama.github.io/posts/2025-12dec/2025-12dec27--01-ping/">⬅️ Rob “Commander” Pike의 AI극딜</a>
        
    </span>

    <span class="post-prevnext-side">
        
        <a class="post-prevnext-btn" href="https://ageldama.github.io/posts/2025-12dec/haruki-manga-stories--super-frog/">➡️ 무라카미 하루키 “Manga Stories 1” 그래픽노블</a>
        
    </span>
</nav>

</main>
<footer class="global-footer">
    2026  © <a href='/myself'>ageldama</a> 👾  | Built with <a href="https://gohugo.io">Hugo</a> + <a href="https://github.com/ageldama/young40er-hugo-theme/">young40er theme</a> <code>1771404626</code> | Subscribe <a href="/index.xml" >📡 RSS</a>
</footer>



<script async src="https://www.googletagmanager.com/gtag/js?id=G-YSB7MGHZ4V"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 gtag('config', 'G-YSB7MGHZ4V', { cookie_flags: 'SameSite=None;Secure' });
</script>



</div>
    </body>
</html>
